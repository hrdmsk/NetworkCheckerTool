<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>レンタルサーバ確認ツール</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>レンタルサーバ確認ツール 🛠️</h1>
        <!-- 最前面表示の切り替えチェックボックス -->
        <div class="settings-container">
            <label class="switch">
                <input type="checkbox" id="on-top-toggle">
                <span class="slider round"></span>
            </label>
            <label for="on-top-toggle" class="switch-label">常に最前面に表示</label>
        </div>
        <!-- Tab Navigation -->
        <nav class="tab-nav">
            <ul>
                <li><a href="#" class="tab-link active" data-tab="nslookup">NSLOOKUP</a></li>
                <li><a href="#" class="tab-link" data-tab="portcheck">ポート接続確認</a></li>
                <li><a href="#" class="tab-link" data-tab="emailauth">メール認証</a></li>
                <li><a href="#" class="tab-link" data-tab="whois">Whois</a></li>
                <li class="dropdown">
                    <a href="#" class="tab-link" id="dropdown-btn">Windowsコマンド ▼</a>
                    <div class="dropdown-content" id="dropdown-menu">
                        <a href="#" data-tab="ping">Ping</a>
                        <a href="#" data-tab="traceroute">Traceroute</a>
                    </div>
                </li>
            </ul>
        </nav>

        <!-- NSLOOKUPタブ -->
        <div id="nslookup-tab" class="tab-content active">
            <h2>NSLOOKUP</h2>
            <label for="domain"><b>ドメイン名:</b></label>
            <input type="text" id="domain" value="google.com">
            <label for="dns-server-select"><b>DNSサーバー:</b></label>
            <select id="dns-server-select">
                <option value="" disabled>DNSサーバーを読込中...</option>
            </select>
            <input type="text" id="custom-dns-server" placeholder="カスタムDNSサーバーのIP or ドメイン名を入力" style="display: none; margin-top: -10px; margin-bottom: 15px;">
            <button id="nslookup-btn" onclick="startLookup()">NSLOOKUP 実行</button>
            <h3>結果:</h3>
            <div id="nslookup-results">ここに結果が表示されます...</div>
        </div>
        <!-- ポート接続確認タブ -->
        <div id="portcheck-tab" class="tab-content">
            <h2>ポート接続確認 (TCP)</h2>
            <label for="portcheck-host"><b>ホスト (ドメイン名 or IPアドレス):</b></label>
            <input type="text" id="portcheck-host" value="google.com">
            <label for="portcheck-port-select"><b>ポート番号:</b></label>
            <select id="portcheck-port-select">
                <option value="21">21 (FTP)</option>
                <option value="22">22 (SSH)</option>
                <option value="25">25 (SMTP)</option>
                <option value="80">80 (HTTP)</option>
                <option value="110">110 (POP3)</option>
                <option value="143">143 (IMAP)</option>
                <option value="443" selected>443 (HTTPS)</option>
                <option value="465">465 (SMTPS)</option>
                <option value="587">587 (Submission)</option>
                <option value="993">993 (IMAPS)</option>
                <option value="995">995 (POP3S)</option>
                <option value="custom">カスタム...</option>
            </select>
            <input type="text" id="portcheck-port-custom" placeholder="ポート番号を入力" style="display: none; margin-top: 10px;">
            <button onclick="startPortCheck()">接続テスト実行</button>
            <h3>結果:</h3>
            <pre id="portcheck-results" class="result-display">ここに接続テストの結果が表示されます...</pre>
        </div>
        <!-- Pingタブ -->
        <div id="ping-tab" class="tab-content">
            <h2>Ping (疎通確認)</h2>
            <label for="ping-host"><b>ホスト (ドメイン名 or IPアドレス):</b></label>
            <input type="text" id="ping-host" value="8.8.8.8">
            <button onclick="startPing()">Ping実行</button>
            <h3>結果:</h3>
            <pre id="ping-results" class="result-display">ここにPingの結果が表示されます...</pre>
        </div>
        <!-- Tracerouteタブ -->
        <div id="traceroute-tab" class="tab-content">
            <h2>Traceroute (経路追跡)</h2>
            <label for="traceroute-host"><b>ホスト (ドメイン名 or IPアドレス):</b></label>
            <input type="text" id="traceroute-host" value="google.com">
            <button onclick="startTraceroute()">Traceroute実行</button>
            <h3>結果:</h3>
            <pre id="traceroute-results" class="result-display">ここにTracerouteの結果が表示されます...</pre>
        </div>
        <!-- Whoisタブ -->
        <div id="whois-tab" class="tab-content">
            <h2>Whois (情報検索)</h2>
            <label for="whois-target"><b>ドメイン名 or IPアドレス:</b></label>
            <input type="text" id="whois-target" value="google.com">
            <button onclick="startWhois()">Whois情報取得</button>
            <h3>結果:</h3>
            <pre id="whois-results" class="result-display">ここにWhois情報が表示されます...</pre>
        </div>
        <!-- メール認証タブ -->
        <div id="emailauth-tab" class="tab-content">
            <h2>メール認証レコード (SPF/DKIM/DMARC)</h2>
            <label for="emailauth-domain"><b>ドメイン名:</b></label>
            <input type="text" id="emailauth-domain" value="google.com">
            <label for="dkim-selector"><b>DKIMセレクタ (任意):</b></label>
            <input type="text" id="dkim-selector" placeholder="例: google, default (空欄で一般的な候補を検索)">
            <button onclick="startEmailAuthCheck()">認証レコード確認</button>
            <h3>結果:</h3>
            <div id="emailauth-results">ここに結果が表示されます...</div>
            <div id="checked-selectors-container" style="display: none; margin-top: 20px;">
                <h4>確認したセレクタ候補:</h4>
                <div id="checked-selectors-list" class="result-display" style="min-height: auto; padding: 10px; font-size: 14px;"></div>
            </div>
            <div id="dkim-progress-container" style="display: none; margin-top: 15px;">
                <div class="progress-bar">
                    <div id="dkim-progress-bar" class="progress-bar-inner"></div>
                </div>
                <div id="dkim-progress-text" style="font-size: 14px; text-align: center; margin-top: 5px;"></div>
            </div>
        </div>
    </div>
    <div id="update-modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <h3 id="update-modal-title"></h3>
            <p>新しいバージョンが利用可能です。<br>配布元からダウンロードしてください。</p>
            <div class="modal-buttons">
                <button id="update-modal-close">閉じる</button>
            </div>
        </div>
    </div>
    <script type="text/javascript" src="js/anime.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <script type="text/javascript" src="js/api/dns_checker.js"></script>
    <script type="text/javascript" src="js/api/network_checker.js"></script>
    <script type="text/javascript" src="js/api/whois_checker.js"></script>
    <script type="text/javascript" src="js/api/windowscmd.js"></script>
    <script type="text/javascript" src="js/api/dkim_checker.js"></script>
    <script type="text/javascript" src="js/api/update_checker.js"></script>
    <div id="loader-overlay">
        <div class="loader"></div>
        <div class="loader-text">処理中...</div>
    </div>
    <footer class="app-footer">
        <span id="app-version"></span>
    </footer>
</body>
</html>
